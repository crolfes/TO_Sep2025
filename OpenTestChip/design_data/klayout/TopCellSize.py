import pya

# Correct way to access -rd parameters in Python
# layout_name = pya.Application.instance().get_config("layout_name")
# if not layout_name:
#     raise ValueError("Missing layout_name. Use: klayout -b -r TopCellSize.py -rd layout_name=your_file.gds")

# Load layout
layout = pya.Layout()
GDS="FMD_QNC_OpenTestChip_R123.gds"
layout.read(GDS)

# Get top cell
top_cell = layout.top_cell()
if top_cell is None:
    raise ValueError("No top cell found in layout.")

# Get bounding box and calculate size
bbox = top_cell.bbox()
dbu = layout.dbu
width = bbox.width() * dbu
height = bbox.height() * dbu
area = width * height

print(f"GDS: {GDS} >> Top cell: {top_cell.name}")
print(f"Size: {width:.2f} µm x {height:.2f} µm")
print(f"Area: {area:.2f} µm²")
print("")

